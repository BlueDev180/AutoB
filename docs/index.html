<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Rogue War TFT Roguelike</title>

  

  <link rel="stylesheet" href="./css/style.css" />
</head>

<body data-screen="menu" data-result="hide" data-howto="closed" data-overlay="none">
  <div id="toast" role="status" aria-live="polite"></div>

  <!-- ===== Fullscreen overlays ===== -->
  <div class="fsOverlay" id="ovAugment" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Choose an Augment</div>
            <div class="ovSub">Pick 1. Some stack, some are unique.</div>
          </div>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="augmentChoices"></div>
      </div>
    </div>
  </div>

  <div class="fsOverlay" id="ovItem" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle" id="itemRewardTitle">Item Found</div>
            <div class="ovSub" id="itemRewardSub">Add it to your inventory, then equip in Planning.</div>
          </div>
          <button id="btnItemContinue" class="btnPrimary" style="min-height:40px; padding:10px 12px;">Continue</button>
        </div>
      </div>
      <div class="ovBody">
        <div class="choiceCard" id="itemRewardCard"></div>
      </div>
    </div>
  </div>

  <div class="fsOverlay" id="ovNode" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Choose Next Node</div>
            <div class="ovSub">Battle for progress, Elite for better rewards, or Event for risk/reward.</div>
          </div>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="nodeChoices"></div>
      </div>
    </div>
  </div>

  <div class="fsOverlay" id="ovEvent" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Event</div>
            <div class="ovSub">Pick one outcome.</div>
          </div>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="eventChoices"></div>
      </div>
    </div>
  </div>

  <!-- Synergies overlay -->
  <div class="fsOverlay" id="ovSynergies" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Synergies</div>
            <div class="ovSub">All traits + breakpoints.</div>
          </div>
          <button id="btnSynClose" class="btnPrimary" style="min-height:40px; padding:10px 12px;">Close</button>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="synergyList"></div>
      </div>
    </div>
  </div>

  <!-- Bonuses overlay -->
  <div class="fsOverlay" id="ovBonuses" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Bonuses</div>
            <div class="ovSub">Active synergy bonuses + team-wide item buffs + global augments.</div>
          </div>
          <button id="btnBonusesClose" class="btnPrimary" style="min-height:40px; padding:10px 12px;">Close</button>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="bonusesList"></div>
      </div>
    </div>
  </div>

  <!-- Replace overlay (when item slots full) -->
  <div class="fsOverlay" id="ovReplace" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Replace an Item</div>
            <div class="ovSub" id="replaceSub">Choose which slot to replace.</div>
          </div>
          <button id="btnReplaceCancel" class="btnPrimary" style="min-height:40px; padding:10px 12px;">Cancel</button>
        </div>
      </div>
      <div class="ovBody">
        <div class="vStack" id="replaceChoices"></div>
      </div>
    </div>
  </div>

  <!-- Inventory overlay -->
  <div class="fsOverlay" id="ovInventory" aria-hidden="true">
    <div class="ovCard">
      <div class="panel">
        <div class="ovHeader">
          <div>
            <div class="ovTitle">Inventory</div>
            <div class="ovSub" id="invHint">Tap an item, then equip it to a unit. Unequip returns to inventory.</div>
          </div>
          <button id="btnInvClose" class="btnPrimary" style="min-height:40px; padding:10px 12px;">Close</button>
        </div>
      </div>

      <!-- Selected item sticky bar -->
      <div class="panel selBar" id="invSelectedBar">
        <div class="selLeft">
          <div class="smallTag">Selected</div>
          <div class="pill" id="invSelectedText" style="min-width:0;">—</div>
        </div>
        <button id="btnInvClearSel" class="btnGhost miniBtn">Clear</button>
      </div>

      <!-- old tabs kept but fully hidden via CSS -->
      <div class="panel" style="padding:10px;" id="invTabsWrap">
        <div class="invTabs">
          <button id="btnInvTabItems" class="btnPrimary">Items</button>
          <button id="btnInvTabUnits" class="btnGhost">Units</button>
        </div>
      </div>

      <div class="ovBody twoCols" id="invGrid">
        <div class="panel" id="invPaneItems" style="min-height:0; overflow:hidden; display:flex; flex-direction:column; gap:10px;">
          <div class="panelTop">
            <div class="panelTitle">Items</div>
            <div class="hint" id="invCount">0</div>
          </div>
          <div class="invList" id="invItems"></div>
        </div>

        <div class="panel" id="invPaneUnits" style="min-height:0; overflow:hidden; display:flex; flex-direction:column; gap:10px;">
          <div class="panelTop">
            <div class="panelTitle">Units</div>
            <div class="hint" id="invUnitsCount">0</div>
          </div>
          <div class="invList" id="invUnits"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="app">

    <!-- MENU -->
    <div class="screen screenMenu">
      <div class="menuWrap">
        <div class="menuCard panel">
          <div class="menuTitle">ROGUE WAR</div>
          <div class="menuSub">TFT roguelike: synergies, augments, items, rarity, permadeath.</div>

          <div class="menuBtns">
            <button id="btnNewGame" class="btnPrimary">New Game</button>
            <button id="btnContinue" disabled>Continue</button>
            <button id="btnHowTo" class="btnGhost">How to Play</button>
          </div>

          <div class="howto" id="howtoBox">
            <div style="font-weight:1000; margin-bottom:6px;">How to Play</div>
            <div>1) Buy units (buying removes the offer).</div>
            <div>2) 3-of-a-kind merges → ★ up (items return).</div>
            <div>3) Synergies activate at breakpoints.</div>
            <div>4) Augments every 3 rounds (and from elites).</div>
            <div>5) Items: higher rarity units hold more.</div>
            <div>6) Permadeath: units that die in battle are removed (items return).</div>
          </div>
        </div>
      </div>
    </div>

    <!-- PLANNING -->
    <div class="screen screenPlanning">
      <div class="planningWrap">

        <div class="panel topPlanning">
          <div class="topGrid">
            <div class="phaseRow">
              <div class="phaseLabel">PLANNING</div>
              <div style="display:flex; gap:8px; align-items:center;">
                <div class="pill" id="unitsPill">Units: 0</div>
                <button id="btnInventory" class="btnGhost" style="min-height:40px; padding:10px 12px;">Inventory</button>
                <button id="btnMenu" class="btnGhost" style="min-height:40px; padding:10px 12px;">Menu</button>
              </div>
            </div>

            <div class="statStrip" aria-label="stats">
              <div class="statTile">
                <div class="lab">ROUND</div>
                <div class="val" id="roundVal">1</div>
              </div>
              <div class="statTile">
                <div class="lab">GOLD</div>
                <div class="val" id="goldVal">10</div>
              </div>
              <div class="statTile">
                <div class="lab">HP</div>
                <div class="val" id="hpVal">20</div>
              </div>
              <div class="statTile">
                <div class="lab">STREAK</div>
                <div class="val" id="streakVal">0</div>
              </div>
            </div>

            <div class="actionRow">
              <button id="btnReroll">Reroll</button>
              <button id="btnStart" class="btnPrimary">Start Fight</button>
            </div>
          </div>
        </div>

        <div class="planningBody">
          <div class="panel shopPanel">
            <div class="panelTop">
              <div class="panelTitle">Shop</div>
              <div class="hint">3-of-a-kind merges → ★ up</div>
            </div>
            <div class="shop" id="shop"></div>
          </div>

          <div class="panel armyPanel">
            <div class="panelTop">
              <div class="panelTitle">Your Army</div>
              <div class="armyHeaderRight">
                <button id="btnBonuses" class="btnGhost">Bonuses</button>
                <button id="btnSynergies" class="btnGhost">Synergies</button>
                <div class="pill">Permadeath ON</div>
              </div>
            </div>
            <div class="armyBar" id="armyBar"></div>
          </div>
        </div>

      </div>
    </div>

    <!-- BATTLE -->
    <div class="screen screenBattle">
      <div class="battleWrap">
        <div class="battleCanvasWrap">
          <canvas id="battle"></canvas>

          <div class="overlayTop">
            <div class="left">
              <div class="pill" id="battleNodePill">BATTLE</div>
              <div class="pill" id="battleStats">Round 1 • Gold 10 • HP 20 • Streak 0</div>
            </div>
            <div class="right">
              <button id="btnNext" disabled>Next</button>
            </div>
          </div>

          <div class="resultBox" id="resultBox">
            <div class="rTitle" id="resultTitle">Result</div>
            <div class="rText" id="resultText">...</div>
            <div class="rBtns">
              <button id="btnResultNext" class="btnPrimary" disabled>Next</button>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>

  <div class="versionTag">AutoB build 2026-03-01 02:37 UTC</div>

  <script defer src="./js/app.js"></script>
</body>
</html>
